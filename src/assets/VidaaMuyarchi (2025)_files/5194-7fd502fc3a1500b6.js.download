"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5194],{45194:function(e,t,r){r.d(t,{Z:function(){return ed}});var a,n,s=r(52322),o=r(2784),i=r(4283),d=r(85767),l=r(83128),c=r(51250);let u="ad-oo",f={getConsentFromCookie(e,t){let r=(0,c.rZ)(u,t?.headers);if(void 0!==r)return!(parseInt(r)&e)},setConsentToCookie(e,t,r){let a=(0,c.rZ)(u,r),n=0;if(void 0!==a&&(("number"==typeof a||"string"==typeof a)&&(n=parseInt(a)),n&t&&!e||!(n&t)&&e))return;e||(n|=t);let s=new Date;s.setHours(s.getHours()+36),(0,c.Ys)(u,n.toString(),s,"shared")}};var w=r(54073),p=r.n(w),h=r(45455),v=r.n(h),m=r(12859),g=r(59393),_=r(30124),y=r(62298),A=r(83827),S=r(87010);let E=(e,t)=>{window?.mediaOrchestrator?.publish(e,t)};var R=r(78056),b=r(73787),I=r(98537),k=r.n(I);let M={init:()=>{try{window?.imdb_ad_debug||(window.imdb_ad_debug=M)}catch{}},override:e=>{try{M.init(),k()(M,e)}catch{}},adRefresh:{isPaused:!1,pause:()=>{M.override({adRefresh:{isPaused:!0}})},resume:()=>{M.override({adRefresh:{isPaused:!1}})}},auction:{default:()=>{window.ad_utils?.apsAuctionManager?.forceDefaultRender()},preferAaxAds:()=>{window.ad_utils?.apsAuctionManager?.forceAaxRender()},prefer3pAds:()=>{window.ad_utils?.apsAuctionManager?.forceApsRender()},view3pAdAuditLog:()=>{window.ad_utils?.apsAuctionManager?.viewAuditLog()}}};var P=r(66617);let L=function(){let e=C("zo");if(e)try{return N(e)}catch(e){console.error(e)}return""},C=function(e){if((0,P.$K)(document)){let t=document.cookie.match("(^|[^;]+)\\s*"+e+"\\s*=\\s*([^;]+)");return t&&t.length>0?t[t.length-1]:""}return""},N=function(e){return(0,P.$K)(window)&&"function"==typeof decodeURIComponent?window.atob(decodeURIComponent(e)):""};var O=r(33775);let T={isReady:!1,hasSetInterval:!1},D=e=>{e.adRefreshInfo&&(e.adRefreshInfo.slotsToRefresh=e.adRefreshInfo.slotsToRefresh.filter(e=>W(e)),j(e.adRefreshInfo)&&(document.addEventListener("visibilitychange",x),T.isReady=!0,window.setInterval(z,1e3*e.adRefreshInfo.intervalInSeconds,e),T.hasSetInterval=!0,M.override({adRefresh:{tryRefresh:()=>{z(e,!0)}}})))},x=()=>{"visible"===document.visibilityState?(T.isReady=!0,T.postResponseCallback=void 0):T.postResponseCallback=()=>{T.isReady=!1}},j=e=>!L()&&!!(!T.hasSetInterval&&e.isEnabled&&e.intervalInSeconds&&e.slotsToRefresh.length),W=e=>F(e)&&(0,P.Gr)(e)&&!U(e)&&!$(e),F=e=>!!window?.AdSlots?.[e],$=e=>{let t=window.ad_utils?.get_slot_iframe(e);return!!t?.hasAttribute("data-first-party-creative-template")},U=e=>window.AdSlots?.[e]?.creativeMetadata?.adProductType?.grade===b.rP.PREMIUM,z=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];M.adRefresh?.isPaused&&!t||!T.isReady||(0,S.rm)()||J(e).then(T.postResponseCallback)},J=e=>{let t=e.clientSideUrl||"",r=e.apsSlotInfoMap||{},a=Object.keys(e.slotSizeMap||{}).filter(t=>e.adRefreshInfo?.slotsToRefresh?.includes(t)).map(t=>({[t]:(e.slotSizeMap||{})[t]})).reduce(B,{});a=q(a);let n=e=>{0===Object.keys(r).length&&(e.slotsMap=Y(e.slotsMap))},s=Object.keys(a).join(",");if(!(Object.keys(r).length>0))return(0,A._J)(t,s,a,0,{},void 0,n);{let e=O.k.getPreviousWindowWidth(),o=(0,R.QH)(s,a,e);return(0,A._J)(t,s,a,0,{},void 0,n,r,o)}},q=e=>Object.keys(e||{}).map(t=>({[t+"_refresh"]:(e||{})[t]})).reduce(B,{}),Y=e=>Object.keys(e||{}).filter(t=>!(0,S.M2)((e||{})[t])).map(t=>({[t]:(e||{})[t]})).reduce(B,{}),B=(e,t)=>({...e,...t}),K=e=>{let t=e?.slots;return t&&t[m.A.SIS_PIXEL]?.slotMarkup},V=(e,t)=>{let r=e.match(/el\.src="(.*)";/),a=r?r[1]:void 0;return a||t.error("Failed to retrieve SIS Pixel URL"),a},X=async(e,t)=>{try{return await fetch(e,{method:"GET",credentials:"include"}),!0}catch(e){t.error("Error fetching SIS Pixel",e)}};var H=r(48574);let Z=(0,r(16189).createLogger)()("util_sisPixel_rws");(a=n||(n={})).GRANTED="granted",a.PROMPT="prompt",a.DENIED="denied";let G=new Set().add("fake_treatment_1.1").add("fake_treatment_1.2").add("fake_treatment_1.3").add("fake_control_2"),Q=["mousedown","scroll","keydown"],ee="https://amazon-adsystem.com",et=async()=>{let e="cookieDeprecationLabel"in navigator,t="requestStorageAccessFor"in document;if(!e||!t)return Z.log("Browser not compatible with Related Website Sets",{hasCookieDeprecationLabel:e,hasRequestStorageAccessFor:t}),!1;try{let e=await navigator.cookieDeprecationLabel.getValue();return Z.log(`Received cookieDeprecationLabel: ${e}`),G.has(e)}catch(e){return Z.error("Issue fetching cookieDeprecationLabel",e),!1}},er=async()=>{let e=await en();switch(Z.log(`Received storageAccessPermissionStatus: ${e}`),e){case"granted":return es();case"prompt":return ea()}Z.log(`'top-level-storage-access' permissions for ${ee}: denied`)},ea=async()=>{let e;if(!navigator.userActivation)return;let t=new Promise(t=>{e=e=>t(e)}),r=async()=>{navigator.userActivation.isActive&&(Q.forEach(e=>{document.removeEventListener(e,r)}),await es(),e(!0))};return Q.forEach(e=>{document.addEventListener(e,r)}),t},en=async()=>{try{return(await navigator.permissions.query({name:"top-level-storage-access",requestedOrigin:ee})).state}catch(e){Z.error("Error querying Storage Access permissions",e);return}},es=async()=>{if("requestStorageAccessFor"in document)try{return await document.requestStorageAccessFor(ee),!0}catch(e){Z.error("Error requesting storage access",e)}},eo=o.memo(e=>{let{sisSlotMarkup:t}=e,[r,a]=(0,o.useState)(!1),n=(0,H.wL)("util_sisSlotMarkup");return(0,o.useEffect)(()=>{(async()=>{if(!await et())return a(!0);await er();let e=V(t,n);e&&await X(e,n)})()},[]),r?(0,s.jsx)("div",{ref:P.SK.bind(null,t)}):null}),ei=e=>{let{adSlotsInfo:t}=e;(0,y.WJ)();let r=()=>{(0,S.rm)()||(0,A.cU)(t).finally(()=>O.k.setPreviousWindowWidth())},{slotsEnabled:a,clientSideUrlBase:n,adSlots:i,slotSizeMap:d,apsSlotInfoMap:l}=(0,y.OF)(t);o.useEffect(()=>{let e,s;if(a&&!v()(d)&&(O.k.setPreviousWindowWidth(),e=p()(r,750),window.addEventListener("resize",e),t?.adRefreshInfo?.isEnabled&&("complete"===document.readyState?D(t):window.addEventListener("load",()=>D(t)))),!a||!n||!i.includes(m.A.INLINE20)){let e={type:g.X.NO_AUTOPLAY_VIDEO_DETECTED_EVENT_TYPE,slotName:m.A.INLINE20,timestamp:Date.now()},t={type:g.X.EMPTY,slotName:"",timestamp:Date.now()};E(_.x.MEDIA_PLAYBACK_EVENT_NAME,e),E(_.x.NO_PRIMARY_ADS_TO_LOAD_EVENT_NAME,t)}return()=>{e&&window.removeEventListener("resize",e),s&&window.removeEventListener("load",s)}},[]);let c=(0,y.sd)(a,n,i,d,l),u=K(t);return(0,s.jsxs)(s.Fragment,{children:[u?(0,s.jsx)(eo,{sisSlotMarkup:u}):null,(0,s.jsx)("script",{async:!0,dangerouslySetInnerHTML:{__html:c}})]})};function ed(){let e=(0,d.B)(),{adSlotsInfo:t}=(0,l.Ok)();return e?.context?.sidecar?.ads?.adsCcbaConsent!==void 0&&f.setConsentToCookie(e.context.sidecar?.ads?.adsCcbaConsent,16,e.context?.headers),(0,s.jsx)(i.Z,{name:"IMDbNextAdPageData",children:(0,s.jsx)(ei,{adSlotsInfo:t})})}},62298:function(e,t,r){r.d(t,{OF:function(){return o},WJ:function(){return n},Wd:function(){return i},sd:function(){return s}});var a=r(73787);let n=()=>{void 0===window.hasAdAJAXCallFired&&(window.hasAdAJAXCallFired=!1)},s=(e,t,r,a,n)=>`
        if (window && window.ad_utils && window.ad_utils.makeAdSlotsCall) {
            window.ad_utils.makeAdSlotsCall(
                ${e},
                '${t}',
                '${r}',
                ${JSON.stringify(a)},
                ${n?JSON.stringify(n):"{}"});
    }`,o=e=>({slotsEnabled:!e||e.slotsEnabled,clientSideUrlBase:e?e.clientSideUrl:"",adSlots:e&&e.slots?Object.keys(e.slots).join(","):"",slotSizeMap:e?e.slotSizeMap:{},apsSlotInfoMap:e&&e.apsSlotInfoMap||{}}),i=e=>!e||e?.creativeMetadata?.creativeWidth===0||e?.creativeMetadata?.adProductType?.name===a.A7.BLANK}}]);